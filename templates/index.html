<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Netunna REDE Splitter v5.3</title>
  <style>
    body {
      font-family: "Inter","Roboto",Arial,sans-serif;
      background:#f6f7fb; color:#333; margin:0;
      animation: fadeInBody 0.5s ease-in;
    }
    @keyframes fadeInBody { from { opacity:0; transform:translateY(-10px); } to { opacity:1; transform:translateY(0); } }

    header {
      background:#ff6d00; color:#fff; padding:18px 28px;
      box-shadow:0 2px 6px rgba(0,0,0,.15);
      display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:12px;
    }
    header h1 { margin:0; font-size:24px; letter-spacing:.3px; }
    header small { display:block; font-size:14px; opacity:.9; margin-top:2px; }

    .status-indicador {
      display:flex; align-items:center; gap:8px;
      background:rgba(255,255,255,.15); padding:6px 12px;
      border-radius:20px; font-size:14px; font-weight:500; white-space:nowrap;
      box-shadow:inset 0 0 3px rgba(0,0,0,0.1);
    }
    .status-indicador span { width:10px; height:10px; border-radius:50%; display:inline-block; animation:none; }
    .ativo span { background:#00d24b; animation:pulseGreen 1.5s infinite; }
    .parado span { background:#ff4444; animation:pulseRed 1.5s infinite; }

    @keyframes pulseGreen {
      0% { box-shadow:0 0 0 0 rgba(0,210,75,0.5); }
      70% { box-shadow:0 0 0 6px rgba(0,210,75,0); }
      100% { box-shadow:0 0 0 0 rgba(0,210,75,0); }
    }
    @keyframes pulseRed {
      0% { box-shadow:0 0 0 0 rgba(255,68,68,0.5); }
      70% { box-shadow:0 0 0 6px rgba(255,68,68,0); }
      100% { box-shadow:0 0 0 0 rgba(255,68,68,0); }
    }

    main {
      display:flex; flex-direction:column;
      gap:20px; padding:25px;
    }
    section {
      background:#fff; border-radius:10px; padding:20px;
      box-shadow:0 3px 6px rgba(0,0,0,.08);
      display:flex; flex-direction:column;
      min-width:0; overflow:hidden;
    }

    h2 { color:#ff6d00; font-size:18px; margin:0 0 10px; border-bottom:2px solid #ff6d00; padding-bottom:6px; }

    button {
      background:#ff6d00; color:#fff; border:none; border-radius:6px;
      padding:7px 12px; font-size:14px; cursor:pointer; margin-right:6px;
      transition:background .2s ease, transform .1s ease;
    }
    button:hover { background:#e55f00; transform:scale(1.02); }

    table { width:100%; border-collapse:collapse; }
    th, td { padding:8px 10px; border:1px solid #e0e0e0; text-align:left; font-size:14px; }
    th {
      background:#ff9100; color:#fff;
      position: sticky; top: 0; z-index: 2;
      box-shadow:0 2px 2px rgba(0,0,0,0.05);
    }
    tr:nth-child(even) { background:#fafafa; }

    .ok { color:green; font-weight:bold; }
    .erro { color:#c00; font-weight:bold; }
    .mono { font-family: ui-monospace, Consolas, "Courier New", monospace; }

    footer {
      text-align:center; font-size:13px; color:#777; padding:15px 10px 25px;
      background:#fff; border-top:1px solid #eee; position:relative;
    }
    #clock { font-weight:500; color:#444; font-size:13px; margin-top:6px; }

    .scroll-box {
      border:1px solid #eee; border-radius:6px; overflow:auto;
      max-height:260px; margin-top:10px;
    }

    .table-count { font-size:13px; color:#555; margin-top:6px; text-align:right; font-style:italic; }

    /* === üîπ Caixa do Agente Netunna === */
    section.agente {
      border-left:5px solid #00bfa5;
      background:#f4fffc;
      box-shadow:0 3px 6px rgba(0,191,165,0.2);
    }
    section.agente h2 {
      color:#00796b;
      border-bottom:2px solid #00bfa5;
    }
    section.agente button { background:#00bfa5; }
    section.agente button:hover { background:#00997a; }

    /* === Logs do Agente === */
    #agentLogs {
      background:#000;
      color:#00ff6a;
      border:1px solid #333;
      border-radius:6px;
      max-height:240px;
      overflow-y:auto;
      box-shadow:inset 0 0 8px rgba(0,0,0,0.4);
      display:none;
      margin-top:10px;
    }
    #agentLogs pre {
      font-size:12px;
      font-family:monospace;
      margin:0;
      padding:8px;
      line-height:1.3;
    }

    /* === Status do Upload Rol√°vel === */
    #uploadStatus {
      max-height:180px;
      overflow-y:auto;
      background:#f9fafb;
      border:1px solid #ddd;
      border-radius:6px;
      padding:8px 10px;
      font-family:"JetBrains Mono", monospace;
      font-size:13px;
      color:#333;
      white-space:pre-line;
      line-height:1.5;
    }
    #uploadStatus::-webkit-scrollbar { width:8px; }
    #uploadStatus::-webkit-scrollbar-thumb {
      background-color:#ccc;
      border-radius:4px;
    }

    /* === Lotes (NSA) === */
    .lote-grupo {
      border:1px solid #eee;
      border-radius:8px;
      margin-top:8px;
      overflow:hidden;
      transition: all 0.2s ease-in-out;
    }
    .lote-header {
      background:#fff7f0;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:6px 12px;
      cursor:pointer;
      border-bottom:1px solid #ffe0b2;
    }
    .lote-header h3 { margin:0; font-size:15px; color:#ff6d00; }
    .lote-header .badge {
      background:#ff9100; color:#fff; border-radius:10px;
      padding:2px 8px; font-size:12px; margin-left:6px;
    }
    .toggle-btn {
      background:none; border:none; color:#ff6d00;
      font-size:20px; font-weight:bold; cursor:pointer;
      transition:transform 0.2s;
    }
    .toggle-btn:hover { transform:scale(1.2); }
    .lote-content {
      max-height:0; overflow:hidden;
      transition:max-height 0.25s ease-in-out;
      background:#fff;
    }
    .lote-content.open { max-height:600px; }
  </style>
</head>

<body>
  <header>
    <div>
      <h1>üß© Netunna REDE Splitter v5.3</h1>
      <small>Processamento Autom√°tico, Valida√ß√£o e Logs</small>
    </div>
    <div id="statusBar" class="status-indicador desconhecido"><span></span><b>Verificando...</b></div>
  </header>

  <main>
    <!-- üîπ Se√ß√£o do Agente Netunna -->
    <section class="agente">
      <h2>ü§ñ Agente Netunna ‚Äî Execu√ß√£o Autom√°tica e Status</h2>
      <small style="color:#00796b; margin-bottom:10px;">
        Gerencia a execu√ß√£o autom√°tica do Splitter, monitorando uploads e processamento.
      </small>
      <div>
        <button onclick="executarAgente()">‚öôÔ∏è Executar Agente</button>
        <button onclick="verLogsAgente()">üß† Ver Logs do Agente</button>
        <button onclick="loadFiles()">üìú Atualizar Status</button>
        <button onclick="resetAgente()">üßπ Limpar Cache</button>
      </div>
      <div class="agente-controls">
        <h3>üì§ Upload via Agente</h3>
        <div id="agenteUploadBox" style="margin-top:8px;">
          <input type="file" id="uploadInput" multiple style="display:none;" />
          <button id="btnUpload" class="btn">üì§ Enviar para Agente</button>
          <progress id="uploadProgress" value="0" max="100" style="display:none; width:90%; height:8px; margin-top:8px;"></progress>
          <div id="uploadStatus">Nenhum upload em andamento.</div>
        </div>
      </div>
      <div id="agentLogs" class="scroll-box">
        <pre id="agentLogContent"></pre>
      </div>
    </section>
    ...
  </main>

  <footer>
    ¬© Netunna Automations ‚Äî REDE Splitter v5.3 | Atualiza√ß√£o autom√°tica a cada 30s
    <div id="clock">üïí <span id="currentTime"></span> ‚Ä¢ Hor√°rio de Bras√≠lia (BRT)</div>
  </footer>

  <script src="/static/main.js"></script>
</body>
</html>
